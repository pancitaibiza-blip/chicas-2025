<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FORTNITE SKIN BATTLE: Â¡DERROTA AL JEFÃ‰!</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oxanium:wght@600&display=swap" rel="stylesheet">
  <style>
    /* Fondo Fortnite */
    body {
      font-family: 'Oxanium', sans-serif;
      color: white;
      text-align: center;
      margin: 0;
      padding: 10px;
      background: #0a0a1a;
      position: relative;
      overflow-x: hidden;
      min-height: 100vh;
    }
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a1a 70%);
      z-index: -3;
    }
    body::after {
      content: '';
      position: fixed;
      top: 15%; right: 8%;
      width: 350px; height: 350px;
      background: radial-gradient(circle, rgba(106, 27, 154, 0.3) 0%, transparent 70%);
      border-radius: 50%;
      filter: blur(30px);
      animation: pulseGlow 8s infinite alternate;
      z-index: -2;
    }
    @keyframes pulseGlow {
      0% { opacity: 0.4; transform: scale(1); }
      100% { opacity: 0.8; transform: scale(1.1); }
    }
    .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
    .particle { position: absolute; border-radius: 50%; animation: float 15s infinite linear; }
    @keyframes float { to { transform: translate(var(--tx), var(--ty)) rotate(360deg); opacity: 0; } }

    /* Contenido */
    .content { position: relative; z-index: 10; opacity: 0; animation: fadeIn 1.5s forwards; }
    @keyframes fadeIn { to { opacity: 1; } }

    h1 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 2.2em;
      color: #ff6b6b;
      text-shadow: 0 0 15px rgba(255,107,107,0.8);
      margin: 10px 0;
    }

    /* Pantalla de batalla */
    .battle-area {
      margin: 20px auto;
      max-width: 600px;
      background: rgba(10,10,26,0.6);
      border-radius: 15px;
      padding: 20px;
      border: 2px solid #4ecdc4;
      backdrop-filter: blur(3px);
    }
    .enemy-card, .player-hand {
      margin: 20px 0;
    }
    .card {
      background: rgba(20,20,40,0.8);
      border-radius: 12px;
      padding: 12px;
      margin: 10px;
      display: inline-block;
      width: 140px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.3s;
      border: 2px solid #45b7d1;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 15px #45b7d1;
    }
    .card img {
      width: 100%;
      border-radius: 8px;
      border: 2px solid #333;
    }
    .stats { font-size: 0.9em; color: #96ceb4; margin: 5px 0; }
    .power { font-size: 0.85em; color: gold; font-style: italic; }
    .enemy-card .card {
      border-color: #ff6b6b;
      background: rgba(40,10,20,0.8);
    }
    .battle-log {
      background: rgba(0,0,0,0.5);
      padding: 12px;
      border-radius: 10px;
      margin: 15px 0;
      min-height: 60px;
      font-size: 1.1em;
      color: #feca57;
    }
    .action-btn {
      background: #4ecdc4;
      color: #0a0a1a;
      border: none;
      padding: 10px 20px;
      font-size: 1.1em;
      font-weight: bold;
      border-radius: 50px;
      cursor: pointer;
      margin: 10px 5px;
      transition: all 0.3s;
    }
    .action-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    }

    /* Tienda y crÃ©ditos */
    .credits-bar {
      background: rgba(10,10,26,0.6);
      padding: 10px;
      border-radius: 10px;
      margin: 15px 0;
      font-size: 1.2em;
      color: #4ecdc4;
      backdrop-filter: blur(2px);
    }
    .store-section {
      margin: 30px auto;
      max-width: 500px;
      background: rgba(10,10,26,0.5);
      padding: 15px;
      border-radius: 15px;
      border: 1px solid #ff6b6b;
    }
    .store-items {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
      margin-top: 15px;
    }
    .store-item {
      background: rgba(25,25,45,0.8);
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #45b7d1;
    }
    .store-item.gold { border-color: gold; }
    .store-item.red { border-color: #ff6b6b; }

    /* Efectos de batalla */
    @keyframes hit {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    .hit { animation: hit 0.5s; }

    @media (max-width: 500px) {
      .card { width: 120px; }
      h1 { font-size: 1.9em; }
    }
  </style>
</head>
<body>
  <div class="particles" id="particles"></div>
  <div class="content">
    <h1>FORTNITE SKIN BATTLE: Â¡DERROTA AL JEFÃ‰!</h1>
    
    <div class="credits-bar">
      CrÃ©ditos: <span id="userCredits">100</span> ðŸ’Ž
      <button class="action-btn" onclick="showStore()" style="font-size:0.9em; padding:5px 12px;">ðŸ›’ Tienda</button>
    </div>

    <div class="battle-area" id="battleArea">
      <!-- Se llena con JavaScript -->
    </div>

    <div class="store-section" id="storeSection" style="display:none;">
      <h3 style="color:gold; font-family:'Bebas Neue'">ðŸ›’ TIENDA DE BATALLA</h3>
      <div class="store-items">
        <div class="store-item gold">
          <div style="font-weight:bold;">Skin Dorada</div>
          <div class="power">+30 DEF</div>
          <div style="color:gold; font-weight:bold;">50 ðŸ’Ž</div>
          <button class="action-btn" onclick="buyItem('golden_skin',50)" style="font-size:0.85em; padding:4px 8px; margin-top:5px;">Comprar</button>
        </div>
        <div class="store-item">
          <div style="font-weight:bold;">Confeti Ã‰pico</div>
          <div class="power">Ataque Sorpresa</div>
          <div style="color:gold; font-weight:bold;">30 ðŸ’Ž</div>
          <button class="action-btn" onclick="buyItem('epic_confetti',30)" style="font-size:0.85em; padding:4px 8px; margin-top:5px;">Comprar</button>
        </div>
        <div class="store-item red">
          <div style="font-weight:bold;">Doble Voto</div>
          <div class="power">Doble Ataque</div>
          <div style="color:gold; font-weight:bold;">70 ðŸ’Ž</div>
          <button class="action-btn" onclick="buyItem('double_vote',70)" style="font-size:0.85em; padding:4px 8px; margin-top:5px;">Comprar</button>
        </div>
      </div>
      <p id="storeMessage" style="margin-top:10px; color:#4ecdc4; font-style:italic;"></p>
    </div>
  </div>

  <audio id="hitSound" src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmYuCz2R1/LMejQNJm298OeYPQ0obLvz66A8DSZsuu7onT8NJmu67+mSPQ4oarju6Y9ADidpt+zqj0EOKWq47OiNQg0qaLbs6ItDDido+O3oiEINKWa26+mIRQ4nZ7Xq6IRFDSZlterphEYLJWS06eiCRQslY7Po54JHCiViseblgkgLI2Gw5eOARwojX67k4oFJCyNetOTigUoLJV2s4+GASwskXKv" preload="auto"></audio>
  <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" preload="auto"></audio>

  <script>
    // Crear partÃ­culas
    function createParticles() {
      const c = document.getElementById('particles');
      const n = window.innerWidth > 768 ? 25 : 15;
      for (let i = 0; i < n; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        const s = Math.random() * 4 + 1;
        p.style.width = p.style.height = `${s}px`;
        p.style.left = `${Math.random() * 100}%`;
        p.style.top = `${Math.random() * 100}%`;
        const cols = ['rgba(255,107,107,0.7)','rgba(78,205,196,0.7)','rgba(254,202,87,0.7)'];
        p.style.background = cols[Math.floor(Math.random() * cols.length)];
        p.style.setProperty('--tx', `${(Math.random()-0.5)*200}px`);
        p.style.setProperty('--ty', `${(Math.random()-0.5)*200}px`);
        p.style.animationDuration = `${15 + Math.random() * 20}s`;
        c.appendChild(p);
      }
    }

    // Cartas (skins) con estadÃ­sticas
    const CARDS = [
      { id:0, name:"Skin 1", img:"https://s93.erome.com/5472/K3IRZbxx/Y8DPmT76.jpeg?v=1764825894", atk:70, def:50, power:"Confeti Cegador", desc:"Ignora defensa enemiga" },
      { id:1, name:"Skin 2", img:"https://s93.erome.com/5472/K3IRZbxx/0B8OzReu.jpeg?v=1764815871", atk:65, def:55, power:"Paso Sigiloso", desc:"+15 ATK si atacas primero" },
      { id:2, name:"Skin 3", img:"https://s93.erome.com/5472/K3IRZbxx/7GmdJa3U.jpeg?v=1764802552", atk:80, def:45, power:"Ataque RelÃ¡mpago", desc:"50% de atacar 2 veces" },
      { id:3, name:"Skin 4", img:"https://s93.erome.com/5472/K3IRZbxx/1FvcJ5u7.png?v=1764809177", atk:60, def:70, power:"Fortaleza", desc:"+20 DEF si defiendes" },
      { id:4, name:"Skin 5", img:"https://s93.erome.com/5472/K3IRZbxx/0VxSvgAl.jpeg?v=1764818017", atk:75, def:50, power:"Danza de Pies", desc:"25% de esquivar ataque" },
      { id:5, name:"Skin 6", img:"https://s93.erome.com/5472/K3IRZbxx/LsMURibY.jpeg?v=1764812622", atk:85, def:40, power:"Furia", desc:"+10 ATK por cada 10% de vida perdida" },
      { id:6, name:"Skin 7", img:"https://s93.erome.com/5472/K3IRZbxx/9RweIpam.jpeg?v=1764813677", atk:55, def:65, power:"Refuerzos", desc:"+10 DEF si pierdes" },
      { id:7, name:"Skin 8", img:"https://s206.erome.com/4699/lpRzYjBO/Z5Tc5k2v.jpeg?v=1745795818", atk:90, def:30, power:"Asesino", desc:"DaÃ±o crÃ­tico si ATK > 80" },
      { id:8, name:"Skin 9", img:"https://s206.erome.com/4699/lpRzYjBO/P9p2wv5y.jpeg?v=1745795818", atk:50, def:80, power:"Escudo", desc:"Absorbe 20 daÃ±o la primera vez" },
      { id:9, name:"Skin 10", img:"https://s206.erome.com/4699/lpRzYjBO/gU2HfmRY.jpeg?v=1745795818", atk:95, def:25, power:"Jefe Final", desc:"El enemigo mÃ¡s fuerte" }
    ];

    let playerCards = [];
    let enemyCard = null;
    let round = 1;
    let gameActive = true;

    // Sistema de crÃ©ditos
    function getDailyCredits() {
      const today = new Date().toDateString();
      const last = localStorage.getItem('lastClaim');
      let credits = parseInt(localStorage.getItem('credits')) || 0;
      if (last !== today) {
        credits = 100;
        localStorage.setItem('credits', credits);
        localStorage.setItem('lastClaim', today);
      }
      return credits;
    }

    function updateCredits() {
      const c = getDailyCredits();
      document.getElementById('userCredits').innerText = c;
    }

    function buyItem(id, cost) {
      let credits = getDailyCredits();
      if (credits >= cost) {
        credits -= cost;
        localStorage.setItem('credits', credits);
        localStorage.setItem(`owned_${id}`, 'true');
        updateCredits();
        document.getElementById('storeMessage').innerText = 'Â¡Compra exitosa! ðŸŽ‰';
        setTimeout(() => document.getElementById('storeMessage').innerText = '', 3000);
      } else {
        document.getElementById('storeMessage').innerText = 'âŒ CrÃ©ditos insuficientes.';
        setTimeout(() => document.getElementById('storeMessage').innerText = '', 3000);
      }
    }

    function showStore() {
      document.getElementById('storeSection').style.display = 
        document.getElementById('storeSection').style.display === 'none' ? 'block' : 'none';
    }

    // LÃ³gica de combate
    function startBattle() {
      // Elegir 3 cartas al azar para el jugador (menos el jefe)
      const nonBoss = CARDS.slice(0, -1);
      playerCards = [];
      while (playerCards.length < 3 && nonBoss.length > 0) {
        const idx = Math.floor(Math.random() * nonBoss.length);
        playerCards.push(nonBoss.splice(idx, 1)[0]);
      }

      // Enemigo: mÃ¡s fuerte segÃºn la ronda
      const bossIndex = Math.min(round, 9); // Ronda 1: skin 1, Ronda 5: skin 5, etc.
      enemyCard = CARDS[bossIndex];

      renderBattle();
    }

    function renderBattle() {
      if (!gameActive) return;

      let html = `<div class="enemy-card"><div class="card">
        <img src="${enemyCard.img}" alt="${enemyCard.name}">
        <div class="stats">ATK: ${enemyCard.atk} | DEF: ${enemyCard.def}</div>
        <div class="power">${enemyCard.power}</div>
      </div></div>`;

      html += `<div class="battle-log" id="battleLog">Â¡Ronda ${round}! Elige tu carta para atacar:</div>`;

      html += `<div class="player-hand">`;
      playerCards.forEach((card, i) => {
        html += `<div class="card" onclick="playerAttack(${i})">
          <img src="${card.img}" alt="${card.name}">
          <div class="stats">ATK: ${card.atk} | DEF: ${card.def}</div>
          <div class="power">${card.power}</div>
        </div>`;
      });
      html += `</div>`;

      document.getElementById('battleArea').innerHTML = html;
    }

    function playerAttack(cardIndex) {
      if (!game-active) return;
      const playerCard = playerCards[cardIndex];
      const log = document.getElementById('battleLog');

      // Aplicar mejoras de la tienda
      let playerAtk = playerCard.atk;
      let enemyDef = enemyCard.def;

      if (localStorage.getItem('owned_golden_skin')) {
        playerAtk += 30; // +30 DEF para el jugador â†’ se traduce en +30 ATK en ataque ofensivo
      }
      if (localStorage.getItem('owned_double_vote')) {
        playerAtk *= 2;
        log.innerHTML = "Â¡Doble Ataque activado! ðŸ’¥<br>";
      }
      if (localStorage.getItem('owned_epic_confetti')) {
        playerAtk += Math.floor(playerAtk * 0.3); // +30% ataque sorpresa
        log.innerHTML += "Â¡Ataque Sorpresa! âœ¨<br>";
      }

      // DaÃ±o = ataque - defensa (mÃ­nimo 10)
      let damage = Math.max(10, playerAtk - enemyDef);
      log.innerHTML += `Â¡${playerCard.name} ataca a ${enemyCard.name} por ${damage} de daÃ±o!`;

      // Efecto visual
      document.querySelector('.enemy-card .card').classList.add('hit');
      document.getElementById('hitSound').play().catch(()=>{});

      setTimeout(() => {
        document.querySelector('.enemy-card .card').classList.remove('hit');
        // Si el enemigo "muere" (simplificado: siempre gana el jugador en esta versiÃ³n)
        round++;
        if (round > 5) {
          // Victoria final
          gameActive = false;
          document.getElementById('battleArea').innerHTML = `
            <div style="text-align:center; padding:30px;">
              <h2 style="color:gold; text-shadow:0 0 10px gold;">ðŸŽ‰ Â¡VICTORIA ROYALE! ðŸŽ‰</h2>
              <p style="font-size:1.2em;">Â¡Derrotaste al Jefe Final!</p>
              <button class="action-btn" onclick="location.reload()">ðŸ”„ Jugar de Nuevo</button>
            </div>
          `;
          document.getElementById('winSound').play();
        } else {
          startBattle();
        }
      }, 800);
    }

    // Iniciar
    createParticles();
    updateCredits();
    startBattle();
  </script>
</body>
</html>
